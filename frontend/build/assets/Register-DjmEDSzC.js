import{r as o,j as e,L as x,a as g}from"./index-Mo7RvhfR.js";const v=()=>{const[s,t]=o.useState({username:"",email:"",password:"",confirmPassword:"",phone:"",profileImage:null}),[c,n]=o.useState({message:"",type:""}),[a,m]=o.useState({}),[p,h]=o.useState(!1),i=d=>{const{name:r,value:l,files:u}=d.target;t(r==="profileImage"?{...s,profileImage:u[0]}:{...s,[r]:l})},f=async d=>{if(d.preventDefault(),s.password!==s.confirmPassword){n({message:"Passwords do not match",type:"danger"}),setTimeout(()=>n({message:"",type:""}),5e3);return}h(!0);const r=new FormData;r.append("username",s.username),r.append("email",s.email),r.append("password",s.password),r.append("confirm_password",s.confirmPassword),r.append("phone",s.phone),s.profileImage&&r.append("profile_picture",s.profileImage);try{await g.post("/register/",r,{headers:{"Content-Type":"multipart/form-data"}}),n({message:"Registration successful! Please check your email to activate your account.",type:"success"}),t({username:"",email:"",password:"",confirmPassword:"",phone:"",profileImage:null}),setTimeout(()=>n({message:"",type:""}),5e3)}catch(l){l.response&&l.response.data?m(l.response.data):m({general:"Something went wrong. Please try again."}),setTimeout(()=>m({}),5e3)}finally{h(!1)}};return e.jsx("section",{className:"min-vh-100 d-flex justify-content-center gradient-custom-3 register",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card shadow my-signup-card-style",style:{borderRadius:20},children:[e.jsx("div",{className:"column-1",children:e.jsx("img",{src:"/Frame4.svg",alt:"signup page image"})}),e.jsxs("div",{className:"card-body p-5 column-2",children:[e.jsx("h2",{className:"text-center mb-4",children:"Create an account"}),c.message&&e.jsx("div",{className:`alert alert-${c.type} text-center`,role:"alert",children:c.message}),e.jsxs("form",{onSubmit:f,encType:"multipart/form-data",children:[e.jsxs("div",{className:"profile-preview-wrapper text-center mb-3",children:[e.jsx("label",{htmlFor:"profileImage",style:{cursor:"pointer"},children:e.jsx("img",{src:s.profileImage?URL.createObjectURL(s.profileImage):"/profile-blank.png",alt:"Profile Preview",className:"profile-preview rounded-circle",style:{width:120,height:120,objectFit:"cover",border:"2px solid #ccc"}})}),e.jsx("input",{type:"file",id:"profileImage",name:"profileImage",accept:"image/*",style:{display:"none"},onChange:i}),a.profile_picture&&e.jsx("div",{className:"text-danger mt-1 small",children:a.profile_picture[0]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",id:"username",name:"username",className:`form-control ${a.username?"is-invalid":""}`,placeholder:"Username",value:s.username,onChange:i}),e.jsx("label",{htmlFor:"username",children:"Username"}),a.username&&e.jsx("div",{className:"invalid-feedback",children:a.username[0]})]})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"email",id:"email",name:"email",className:`form-control ${a.email?"is-invalid":""}`,placeholder:"Email",value:s.email,onChange:i}),e.jsx("label",{htmlFor:"email",children:"Email"}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email[0]})]})})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"tel",id:"phone",name:"phone",className:`form-control ${a.phone?"is-invalid":""}`,placeholder:"Phone Number",value:s.phone,onChange:i}),e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),a.phone&&e.jsx("div",{className:"invalid-feedback",children:a.phone})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"password",id:"password",name:"password",className:`form-control ${a.password?"is-invalid":""}`,placeholder:"Password",value:s.password,onChange:i}),e.jsx("label",{htmlFor:"password",children:"Password"}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password[0]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-floating mb-3",children:[e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:`form-control ${a.confirm_password?"is-invalid":""}`,placeholder:"Confirm Password",value:s.confirmPassword,onChange:i}),e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),a.confirm_password&&e.jsx("div",{className:"invalid-feedback",children:a.confirm_password[0]})]})})]}),e.jsxs("div",{className:"form-check d-flex justify-content-center mb-3",children:[e.jsx("input",{className:"form-check-input me-2",type:"checkbox",id:"rights"}),e.jsxs("label",{className:"form-check-label",htmlFor:"rights",children:["I agree to all statements in"," ",e.jsx("a",{href:"#!",className:"text-body",children:e.jsx("u",{className:"text-secondary",children:"Terms of service"})})]})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100 py-2",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Register"})}),e.jsxs("p",{className:"text-center text-muted mt-2 mb-0",children:["Already have an account?"," ",e.jsx(x,{to:"/login",children:"Login Here"})]})]})]})]})})})};export{v as default};
